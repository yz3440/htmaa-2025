---
title: "3D Scanning a Virtual Space"
categories: ["weekly assignment"]
displayedCategory: "Is this scanning?"
date: "2025-09-27"
year: 2025
displayedDate: "Week 4"

description: "Scanning a virtual space with a 3D scanner."

shortDescription: "Scanning a virtual space with a 3D scanner."

tags:
  - 3d scanning
  - vr
  - virtual space

externalLink: null
videoLink: null

pressLinks: []

publicationLinks: []

priority: 2

roles: []

collaborators: []

image: "/project-assets/week-4/week-4-3d-scan/metashape-pointcloud.jpeg"
video: "/project-assets/week-4/week-4-3d-scan/metashape-pointcloud.mp4"

visible: true
featured: false

tableOfContents: true
---

## Assignment

- 3D scan an object (and optionally print it)

## My Past Experience

I've been exploring with 3D scanning since 2018. That was before cloud 3D scanning services like Luma and Polycam were a thing. I became really good at Agisoft PhotoScan (later renamed to Agisoft Metashape) to scan objects. Here's a 3D model of a Chinese Penjing I scanned in Early 2019. The artist He Jianglong is an internet friend of mine from a PSP PSN game sharing community back in 2010.

<IFrame
  widthPercentage={50}
  embedUrl="https://sketchfab.com/models/63f37d0c4c7344b192cfac9284d9d178/embed"
  caption="Mini Chinese Penjing by He Jianglong"
  originalUrl="https://sketchfab.com/3d-models/mini-chinese-penjing-by-he-jianglong-63f37d0c4c7344b192cfac9284d9d178?utm_medium=embed&utm_campaign=share-popup&utm_content=63f37d0c4c7344b192cfac9284d9d178"
  hostedPlatform="Sketchfab"
  height={500}
/>

## The Idea

One of the most creative use of 3D scanning I've seen is [Create Counter-Strike in UE4](https://www.youtube.com/watch?v=hi7A6D0TDfQ) by Quixel (a compnay focusing on 3D scanned assets, now owned by Epic Games). The video shows how they processed a walkthrough screen recording video of the iconic Counter-Strike De_Dust 2 map, and used photogrammetry to create a rough starting point for a detailed 3D model.

<EmbeddedVideo
  src="https://www.youtube.com/watch?v=hi7A6D0TDfQ"
  caption="Create Counter-Strike in UE4 by Quixel"
/>

The result is a very detailed 3D model of the Counter-Strike De_Dust 2 map.

<Media
  src="/project-assets/week-4/week-4-3d-scan/quixel-dust-2-scan.jpeg"
  caption="Counter-Strike De_Dust 2 map scanned by Quixel"
  copyright="Quixel"
/>

I really want to try this out with a virtual space I'm familiar with.

## The Plan

I've spent a lot of time in Overwatch and I would test this technique with a map from that game.

I found a video on YouTube that anaylyze strategic positioning of the Blizzard World map for tank players.

<EmbeddedVideo
  src="https://www.youtube.com/watch?v=wpl-8ld6_ws"
  caption="Analyzing the Blizzard World map for tank players"

/>

## Download the video

I downlaoded the video with [`yt-dlp`](https://github.com/yt-dlp/yt-dlp), the best video downloader out there. I retrieved a mp4 file from [the video's url](https://www.youtube.com/watch?v=wpl-8ld6_ws). The file size is 1.68GB with a running time of 42 minutes 36 seconds.

<Media
  widthPercentage={66}
  src="/project-assets/week-4/week-4-3d-scan/mp4-file.jpeg"
  caption="The downloaded mp4 file"
/>

## Import the video into Metashape

Agisoft Metashape is a photogrammetry software that I've used for a long time. I paid for the Russian company's lifetime license a long time ago, before the Ukraine war broke out. The software integrated a helpful workflow for importing videos. If you import a video, it will automatically generate a set of frames for you at the sampling configuration of your choice.

<Media
  widthPercentage={66}
  src="/project-assets/week-4/week-4-3d-scan/metashape-sampling-frames.jpeg"
  caption="The sampling frames generated by Metashape"

/>

Unfortunately, the built-in video sampler is not very efficient. It estimated 6 hours to extract all the frames at "large" gap.

<Media
  widthPercentage={66}
  src="/project-assets/week-4/week-4-3d-scan/extract-frame-time-too-long.jpeg"
  caption="Metashape estimated 6 hours to extract frames"
/>

I decided to extract the frames with Premiere Pro. I sped the video up to 1000% (10x) and only extracted the first 50 seconds of the sped up video at 30 fps, which gives me around 1500 frames. This way I only need to process 3 frames, and it only took me about 10 minutes to process the frames. I also adjusted the resolution from 1920x1080 to 1920x900 to remove the game UI on the top of the screen.

<Media
  widthPercentage={66}
  src="/project-assets/week-4/week-4-3d-scan/premiere-speed.jpeg"
  caption="Sped up the video in Premiere Pro"
/>

Back to Metashape, I imported the frames and proceeded to align all the photos. I deliberately did not use the "Sequential" option, since the sped up video is pretty jumpy and doesn't guarantee a good alignment in consecutive frames. The alignment rate is quite nice, 1406/1593 aligned (~88.2%). It took me aroun 5 minutes to align the frames.

<Media
  widthPercentage={66}
  src="/project-assets/week-4/week-4-3d-scan/metashape-align.jpeg"
  caption="Aligned the frames in Metashape, 1406/1593 aligned (~88.2%)"
/>

## 3D Scanning

Then I started to build the point cloud (dense cloud). At medium setting and medium size, it took around 10 minutes to build the point cloud. The point cloud looked promissing since you can tell some buildings and the floor level are. But there are many missing part in the high up area and the floor, since in the video, the player isn't staring at the ground or sky.

<Media
  widthPercentage={66}
  src="/project-assets/week-4/week-4-3d-scan/metashape-pointcloud.mp4"
  caption="Built the point cloud in Metashape"
/>

I then built the mesh from the point cloud. The mesh is not very good. I think building from this video is the limiting factor (not good enough coverage from a 3D scanning standpoint).

<Media
  widthPercentage={66}
  src="/project-assets/week-4/week-4-3d-scan/metashape-mesh.mp4"
  caption="Built the mesh in Metashape"
/>

The model is exported as a glb file (90MB) and I uploaded it to Sketchfab so that you can see it below. I won't burden the CBA GitLab with this large file given how shitty the model looks.

<IFrame
  widthPercentage={66}
  embedUrl="https://sketchfab.com/models/35e1a0e2316d47ef896a92f10f2d845e/embed"
  caption="Blizzard World map scanned by Metashape"
  originalUrl="https://sketchfab.com/3d-models/giant-blob-of-blizzard-world-from-overwatch-35e1a0e2316d47ef896a92f10f2d845e"
  hostedPlatform="Sketchfab"
  height={500}
/>
